(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(14),o=n.n(r),i=(n(19),n(3)),s=n(0),u=function(e){var t=e.searchPhrase,n=e.handleSearchChange;return Object(s.jsxs)("div",{children:["Filter contacts shown with ",Object(s.jsx)("input",{value:t,onChange:n})]})},d=function(e){var t=e.newName,n=e.newNumber,c=e.submitNewContact,a=e.handleNameChange,r=e.handleNumberChange;return Object(s.jsx)("form",{onSubmit:c,children:Object(s.jsx)("table",{children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"Name:"}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{value:t,onChange:a})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"Number:"}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{value:n,onChange:r})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{}),Object(s.jsx)("td",{children:Object(s.jsx)("button",{type:"submit",children:"Add"})})]})]})})})},j=function(e){var t=e.id,n=e.name,c=e.number,a=e.deleteContact;return Object(s.jsxs)("tr",{children:[Object(s.jsxs)("td",{children:[" ",n," "]}),Object(s.jsxs)("td",{children:[" ",c," "]}),Object(s.jsx)("td",{children:Object(s.jsx)("button",{onClick:function(){return a(t,n)},children:"Delete"})})]},t)},l=function(e){var t=e.persons,n=e.deleteContact;return Object(s.jsx)("table",{children:Object(s.jsx)("tbody",{children:t.length?t.map((function(e){return Object(s.jsx)(j,{id:e.id,name:e.name,number:e.number,deleteContact:n},e.id)})):Object(s.jsx)("tr",{children:Object(s.jsx)("td",{children:" No contacts matching searched filter. "})})})})},b=n(4),h=n.n(b),f={getAll:function(){return h.a.get("/api/persons").then((function(e){return e.data}))},addContact:function(e){return h.a.post("/api/persons",e).then((function(e){return e.data}))},deleteContact:function(e){return h.a.delete("/api/persons/"+e).then((function(e){return e.data}))},updateContact:function(e){return h.a.put("/api/persons/"+e.id,e).then((function(e){return e.data}))}},O=function(e){var t=e.code,n=e.message;return 1===t?Object(s.jsx)("div",{className:"positiveAlert",children:n}):2===t?Object(s.jsx)("div",{className:"negativeAlert",children:n}):3===t?Object(s.jsx)("div",{className:"neutralAlert",children:n}):Object(s.jsx)(s.Fragment,{})},m=(n(39),function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),o=Object(i.a)(r,2),j=o[0],b=o[1],h=Object(c.useState)(""),m=Object(i.a)(h,2),x=m[0],p=m[1],v=Object(c.useState)(""),C=Object(i.a)(v,2),g=C[0],w=C[1],N=Object(c.useState)(""),S=Object(i.a)(N,2),y=S[0],k=S[1],A=Object(c.useState)(-1),D=Object(i.a)(A,2),P=D[0],E=D[1],F=Object(c.useState)(""),J=Object(i.a)(F,2),L=J[0],R=J[1];Object(c.useEffect)((function(){f.getAll().then((function(e){b(e),a(e)})).catch((function(e){console.log(e),E(2),R("Cannot contact server. Refresh page to try again.")}))}),[]);var B=function(e,t){a(e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})))},I=function(e){b(e),p(""),w(""),B(e,y)},M=function(e,t){E(e),R(t),setTimeout((function(){E(-1),R("")}),3e3)};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(O,{code:P,message:L}),Object(s.jsx)("h3",{children:"Add new contact"}),Object(s.jsx)(d,{newName:x,newNumber:g,submitNewContact:function(e){if(e.preventDefault(),j.find((function(e){return e.name===x}))){if(window.confirm("".concat(x," is already added to the phonebook. Replace the old number with the new one?"))){var t=j.find((function(e){return e.name===x}));t.number=g,f.updateContact(t).then((function(e){I(j.map((function(t){return t.id!==e.id?t:e}))),M(1,"Contact details for ".concat(e.name," updated successfully."))})).catch((function(e){if(404===e.response.status)return M(2,"".concat(t.name," has already been removed from the server.")),void I(j.filter((function(e){return e.id!==t.id})));M(2,"Cannot update contact. ")}))}}else{var n={name:x,number:g};f.addContact(n).then((function(e){I(j.concat([e])),M(1,"Added ".concat(e.name," successfully."))})).catch((function(e){M(2,"Cannot create contact.")}))}},handleNameChange:function(e){return p(e.target.value)},handleNumberChange:function(e){return w(e.target.value)}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(u,{searchPhrase:y,handleSearchChange:function(e){var t=e.target.value;k(t),B(j,t)}}),Object(s.jsx)(l,{persons:n,deleteContact:function(e,t){window.confirm("Delete ".concat(t,"?"))&&f.deleteContact(e).then((function(t){var n=j.filter((function(t){return t.id===e}))[0].name,c=j.filter((function(t){return t.id!==e}));b(c),B(c,y),M(1,"Contact details of ".concat(n," successfully removed from phonebook."))})).catch((function(e){M(2,"Cannot delete contact.")}))}})]})});o.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(m,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.7d6942da.chunk.js.map